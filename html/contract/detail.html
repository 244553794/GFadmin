<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<!-- Content Header (页眉) -->
<section class="content-header">
    <h1>查看业务合同
    	<small>查看业务合同内容信息</small>
    </h1>
    <ol class="breadcrumb">
        <li><a><i class="fa fa-dashboard"></i> 首页</a></li>
        <li><a>业务合同列表</a></li>
        <li class="active">查看信息</li>
    </ol>
</section>
<!-- Main content -->
<section class="content">
    <!--基本信息-->
    <form>
    <div class="box">
    	<div class="box-header with-border">
        	<h3 class="box-title">合同基本信息</h3>
            <div class="box-tools pull-right">
                <button type="button" class="btn btn-box-tool" data-widget="collapse" data-toggle="tooltip" title="折叠" onClick="hidebox(this)"><i class="fa fa-minus"></i></button>
                <button type="button" id="reflash" class="btn btn-box-tool" title="刷新，注意保存信息" onClick="jumpURL(this)" url="/html/contract/detail.html" param=""><i class="fa fa-refresh" aria-hidden="true"></i></button>
            </div>
        </div>
        <div class="box-body">
            <div class="input-group" style="margin-bottom:20px;">
                <span class="input-group-addon" style="background-color: #f1f1f1"><div style="width:200px;">合同编号</div></span>
                <div class="form-control" id="contractNum"></div>
            </div>
            <div class="input-group" style="margin-bottom:20px;">
                <span class="input-group-addon" style="background-color: #f1f1f1"><div style="width:200px;">合同名称</div></span>
                <div class="form-control" id="contractName"></div>
            </div>
            <div class="input-group" style="margin-bottom:20px;">
                <span class="input-group-addon" style="background-color: #f1f1f1"><div style="width:200px;">甲方</div></span>
                <div class="form-control" id="aPartyCompanyname"></div>
            </div>
            <div class="input-group" style="margin-bottom:20px;">
                <span class="input-group-addon" style="background-color: #f1f1f1"><div style="width:200px;">乙方</div></span>
                <div class="form-control" id="bPartyCompanyname"></div>
            </div>
            <div class="input-group" style="margin-bottom:20px;position: relative;">
                <span class="input-group-addon" style="background-color: #f1f1f1"><div style="width:200px;">签约时间</div></span>
                <div class="form-control" id="signingTime"></div>
            </div>
            <div class="input-group" style="margin-bottom:20px;position: relative;">
                <span class="input-group-addon" style="background-color: #f1f1f1"><div style="width:200px;">生效时间</div></span>
                <div class="form-control" id="effectTime"></div>
            </div>
            <div class="input-group" style="margin-bottom:20px;position: relative;">
                <span class="input-group-addon" style="background-color: #f1f1f1"><div style="width:200px;">失效时间</div></span>
                <div class="form-control" id="faileTime"></div>
            </div>
            <div class="input-group" style="margin-bottom:20px;">
                <span class="input-group-addon" style="background-color:#f1f1f1;"><div style="width:200px;">乙方签约人</div></span>
                <div class="form-control" id="bSigningPersonname"></div>
            </div>
            <div class="input-group" style="margin-bottom:20px;">
                <span class="input-group-addon" style="background-color: #f1f1f1"><div style="width:200px;">甲方联系人</div></span>
                <div class="form-control" id="aSigningPersonname"></div>
            </div>
            <div class="input-group" style="margin-bottom:20px;">
                <span class="input-group-addon" style="background-color: #f1f1f1"><div style="width:200px;">甲方联系电话</div></span>
                <div class="form-control" id="contactPhone"></div>
            </div>
            <div class="input-group" style="margin-bottom:20px;">
                <span class="input-group-addon" style="background-color: #f1f1f1"><div style="width:200px;">甲方联系地址</div></span>
                <div class="form-control" id="contactAddress"></div>
            </div>
            <div class="input-group" style="margin-bottom:20px;">
                <span class="input-group-addon" style="background-color: #f1f1f1"><div style="width:200px;">合同金额(￥)</div></span>
                <div class="form-control" id="contractMoney"></div>
            </div>
            <div class="input-group" style="margin-bottom:20px;">
                <span class="input-group-addon" style="background-color:#f1f1f1; "><div style="width:200px;">支付方式</div></span>
                <div class="form-control" id="payType"></div>
            </div>
        </div>
    </div>
    <!--添加第二个面板-->
    <div class="box">
        <div class="box-header with-border">
        	<h3 class="box-title">合同业务信息</h3>
            <div class="box-tools pull-right">
                <button type="button" class="btn btn-box-tool" data-widget="collapse" data-toggle="tooltip" title="折叠" onClick="hidebox(this)"><i class="fa fa-minus"></i></button>
            </div>
        </div>
        <div class="box-body">
            <span id="busiC">
            
            </span>
        </div>
    </div>
    
    <div class="box">
        <div class="box-header with-border">
        	<h3 class="box-title">到期提醒设置</h3>
            <div class="box-tools pull-right">
                <button type="button" class="btn btn-box-tool" data-widget="collapse" data-toggle="tooltip" title="折叠" onClick="hidebox(this)"><i class="fa fa-minus"></i></button>
            </div>
        </div>
        <div class="box-body">
            <div class="input-group" style="margin-bottom:20px;">
                <span class="input-group-addon" style="background-color:#f1f1f1; "><div style="width:200px;">提前量</div></span>
                <div class="form-control" id="remindTimeType"></div>
            </div>
            <div class="input-group" style="margin-bottom:20px;">
                <span class="input-group-addon" style="background-color:#f1f1f1; "><div style="width:200px;">提醒方式</div></span>
                <div class="form-control" id="repeatRemindType"></div>
            </div>
        </div>
    </div>
    </form>
    <!--底部-->
    <div class="box-footer" style="position:fixed; left:0px; bottom:0px; width:100%; height:60px;box-shadow: 0px 0px 40px #888888; z-index:9; background-color:#FFF;">
    <p><error></error></p>
    <button type="button" class="btn btn-default fl_right" style="width:150px;" onClick="jumpURL(this)" url="/html/contract/" param="">取消返回</button>
    </div>
</section>
<script>
//填充表单
var param = $("#ajaxcontent").attr("param");
param = param.replace(/'/g,"\"");
$("#reflash").attr("param",param);
param = JSON.parse(param);
fillform(param.id)
function fillform(id){
    var url = depUrl + "/contract/get";
    $.ajax({
		type: 'POST',
		url: url,
		data: {"id":id},
		dataType: "json",
		ontentType:"application/x-www-form-urlencoded",
		headers:{accessToken:$.session.get('accessToken')},
		success: function(data){
			var code = data.code;
			if(code=="000000"){
                $.each(data.data.list,function(i,items){
                    $("#contractNum").text(outNull(items.contractNum));
                    $("#contractName").text(outNull(items.contractName));
                    $("#aPartyCompnayid").text(outNull(items.aPartyCompnayid));
                    $("#aPartyCompanyname").text(outNull(items.aPartyCompanyname));
                    $("#bPartyCompanyid").text(outNull(items.bPartyCompanyid));
                    $("#bPartyCompanyname").text(outNull(items.bPartyCompanyname));
                    $("#signingTime").text(outNull(items.signingTime));
                    $("#effectTime").text(outNull(items.effectTime));
                    $("#faileTime").text(outNull(items.faileTime));
                    $("#aSigningPersonname").text(outNull(items.aSigningPersonname));
                    $("#aSigningPersonid").text(outNull(items.aSigningPersonid));
                    $("#bSigningPersonname").text(outNull(items.bSigningPersonname));
                    $("#contactPhone").text(outNull(items.contactPhone));
                    $("#contactAddress").text(outNull(items.contactAddress));
                    $("#contractMoney").text(outNull(items.contractMoney));
                    if(items.payType=="1"){
                        $("#payType").text("按月支付");
                    }else if(items.payType=="2"){
                        $("#payType").text("按年支付");
                    }else if(items.payType=="3"){
                        $("#payType").text("一次性支付");
                    }
                    if(items.remindTimeType=="1"){
                        $("#remindTimeType").text("提前1个月");
                    }else if(items.remindTimeType=="2"){
                        $("#remindTimeType").text("提前2个月");
                    }else if(items.remindTimeType=="3"){
                        $("#remindTimeType").text("提前3个月");
                    }
                    if(items.repeatRemindType=="1"){
                        $("#repeatRemindType").text("按月重复提醒");
                    }else if(items.repeatRemindType=="2"){
                        $("#repeatRemindType").text("按周重复提醒");
                    }else if(items.repeatRemindType=="3"){
                        $("#repeatRemindType").text("按天重复提醒");
                    }
                    //业务内容信息
                    $.each(items.projectContractList,function(i,itemx){
                        var type = "";
                        if(itemx.type=="1"){
                            type = "按岗位";
                        }
                        if(itemx.type=="2"){
                            type = "按人数";
                        }
                        $("#busiC").append('<div class="contact_box"><div class="input-group" style="margin-bottom:20px;">签约项目：'+outNull(itemx.projectName)+'</div><div class="input-group" style="margin-bottom:20px;">联系人：<span id="contactUsernameText">'+outNull(itemx.contactUsername)+'</span></div><div class="input-group" style="margin-bottom:20px;">联系电话：<span id="contactUsernameText">'+outNull(itemx.contactTel)+'</span></div><div class="input-group" style="margin-bottom:20px;">履约方式：'+type+'</div><div class="input-group" style="width: 100%">数量：'+itemx.number+'</div></div>');
                    });
                    
                });
			}else{
				$(".box-footer error").text("* 错误提示："+ data.msg +"！");
			}
		},
		error:function(data){
			$(".box-footer error").text("* 错误提示："+ data.msg +"！");
			return false;
		}
	});
}
</script>
